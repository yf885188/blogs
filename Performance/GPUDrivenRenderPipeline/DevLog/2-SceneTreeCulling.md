# 目标
- 使用四叉树进行剔除

# 思路
- 生成四叉树
  - 根据AABB来确定场景大小
  - 从上至下来分割四叉树的节点

## 生成四叉树
参考[网址](https://zhuanlan.zhihu.com/p/180560098)

- 按照场景尺寸和预设的场景树最大深度划分层次
- 节点插入到层次中：直接根据大小和稀疏四叉树的关系，单个插入的复杂度为$O(1)$
- 从上往下遍历这个层次，得到最终的场景树
  - 高层的节点中包含AABB，说明这个节点划分的后续节点要合并到这个高层节点中

## 提交数据
在场景开始把所有顶点都提交到GPU，然后通过场景树进行剔除然后选择绘制。

> 也可根据剔除后的Mesh进行提交，将在后续进行改造。

## 结果对比
场景树深度为5的情况下；
<div align="center">

![][SceneTreeDS]

延迟渲染的结果

![][SceneTreeZB]
ZBuffer渲染的结果

不同深度下结果：
|depth|DS|ZB|
|:---:|:---:|:---:|
|5|215|245|
|10|280|320|


</div>





[SceneTreeDS]: ./SceneTreeCullingDS.jpg
[SceneTreeZB]: ./SceneTreeCullingZB.jpg
