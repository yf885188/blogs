<!-- TOC -->

- [1. 概述](#1-概述)
- [2. work flow](#2-work-flow)
- [3. 外壳着色器](#3-外壳着色器)
  - [3.1. 常量外壳着色器](#31-常量外壳着色器)
  - [3.2. 控制点外壳着色器](#32-控制点外壳着色器)
- [4. 镶嵌器阶段](#4-镶嵌器阶段)
- [5. 域着色器](#5-域着色器)

<!-- /TOC -->

# 1. 概述
渲染流水线中参与对几何图形进行镶嵌处理的3个阶段。
存在的原因：
- 通过GPU实现LOD，动态根据网格与摄像机的距离或其他因素来调节网格；
- 物理模拟与动画特效，低模的时候进行模拟等计算，高模直接增加细节；
- 节约内存；

# 2. work flow

<div align="center">

![][TesseWorkFlow]

</div>

# 3. 外壳着色器
- 常量外壳着色器
- 控制点外壳着色器

## 3.1. 常量外壳着色器
对面片进行操作，生成曲面细分因子。

> 如果曲面细分因子为0，则会被直接丢弃。因此可以用于视锥体剔除与背面剔除等。

确定因子的几个指标：
- 跟摄像机的距离
- 根据占用屏幕的范围
- 根据三角形的朝向
- 根据粗糙程度

## 3.2. 控制点外壳着色器
以控制点作为输入与输出，没输出一个控制点，这个着色器就会被调用一次。

# 4. 镶嵌器阶段
根据外壳着色器的输出，硬件对网格进行镶嵌化处理。

# 5. 域着色器
上一个阶段的输出点还不是最终的裁剪位置坐标点，需要在域着色器中进行处理。

输入：
- 曲面细分因子
- 控制点
- 镶嵌阶段输出的顶点位置参数坐标

[TesseWorkFlow]: ./TessellationWorkFlow.bmp